{% extends "base.html" %}

{% block title %}New Configurations{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>New Configurations</h2>

    {% if configs %}
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Files</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for config in configs %}
                <tr>
                    <td>{{ config.timestamp }}</td>
                    <td>
                        <ul class="list-unstyled mb-0">
                            {% if config.modified_files.file1 %}
                            <li>new_group_config.xml</li>
                            {% endif %}
                            {% if config.modified_files.file2 %}
                            <li>new_thumbnail_settings.xml</li>
                            {% endif %}
                        </ul>
                    </td>
                    <td>
                        <div class="btn-group">
                            {% if config.modified_files.file1 %}
                            <a href="{{ url_for('download_new_config', config_id=config.id, filename=config.modified_files.file1) }}"
                                class="btn btn-sm btn-primary">Download Group Config</a>
                            {% endif %}
                            {% if config.modified_files.file2 %}
                            <a href="{{ url_for('download_new_config', config_id=config.id, filename=config.modified_files.file2) }}"
                                class="btn btn-sm btn-primary ms-1">Download Thumbnail Settings</a>
                            {% endif %}
                            <a href="{{ url_for('delete_new_config', config_id=config.id) }}"
                                class="btn btn-sm btn-danger ms-1"
                                onclick="return confirm('Are you sure you want to delete this configuration?')">Delete</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if configs|length > 1 %}
    <div class="mt-3">
        <a href="{{ url_for('delete_all_new_configs') }}" class="btn btn-danger"
            onclick="return confirm('Are you sure you want to delete all configurations?')">Delete All</a>
    </div>
    {% endif %}

    {% else %}
    <p class="text-muted">No new configurations found.</p>
    {% endif %}
</div>
{% endblock %}